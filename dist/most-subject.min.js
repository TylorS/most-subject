(function(u,c){'object'==typeof exports&&'undefined'!=typeof module?c(exports):'function'==typeof define&&define.amd?define(['exports'],c):c(u.mostSubject=u.mostSubject||{})})(this,function(u){'use strict';function c(Zo,$o){function Jo(){this.constructor=Zo}for(var ep in $o)$o.hasOwnProperty(ep)&&(Zo[ep]=$o[ep]);Zo.prototype=null===$o?Object.create($o):(Jo.prototype=$o.prototype,new Jo)}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function v(Zo){this.source=Zo}/** @license MIT License (c) copyright 2010-2016 original author or authors */// Non-mutating array operations
// cons :: a -> [a] -> [a]
// a with x prepended
function k(Zo,$o){const Jo=$o.length,ep=Array(Jo+1);ep[0]=Zo;for(let tp=0;tp<Jo;++tp)ep[tp+1]=$o[tp];return ep}// append :: a -> [a] -> [a]
// a with x appended
function h(Zo,$o){const Jo=$o.length,ep=Array(Jo+1);for(let tp=0;tp<Jo;++tp)ep[tp]=$o[tp];return ep[Jo]=Zo,ep}// drop :: Int -> [a] -> [a]
// drop first n elements
function m(Zo,$o){// eslint-disable-line complexity
if(0>Zo)throw new TypeError('n must be >= 0');const Jo=$o.length;return 0===Zo||0===Jo?$o:Zo>=Jo?[]:_(Zo,$o,Jo-Zo)}// unsafeDrop :: Int -> [a] -> Int -> [a]
// Internal helper for drop
function _(Zo,$o,Jo){const ep=Array(Jo);for(let tp=0;tp<Jo;++tp)ep[tp]=$o[Zo+tp];return ep}// tail :: [a] -> [a]
// drop head element
function w(Zo){return m(1,Zo)}// copy :: [a] -> [a]
// duplicate a (shallow duplication)
// map :: (a -> b) -> [a] -> [b]
// transform each element with f
function E(Zo,$o){const Jo=$o.length,ep=Array(Jo);for(let tp=0;tp<Jo;++tp)ep[tp]=Zo($o[tp]);return ep}// reduce :: (a -> b -> a) -> a -> [b] -> a
// accumulate via left-fold
// replace :: a -> Int -> [a]
// replace element at index
function R(Zo,$o,Jo){// eslint-disable-line complexity
if(0>$o)throw new TypeError('i must be >= 0');const ep=Jo.length,tp=Array(ep);for(let rp=0;rp<ep;++rp)tp[rp]=$o===rp?Zo:Jo[rp];return tp}// remove :: Int -> [a] -> [a]
// remove element at index
function A(Zo,$o){// eslint-disable-line complexity
if(0>Zo)throw new TypeError('i must be >= 0');const Jo=$o.length;return 0===Jo||Zo>=Jo?$o:1===Jo?[]:S(Zo,$o,Jo-1)}// unsafeRemove :: Int -> [a] -> Int -> [a]
// Internal helper to remove element at index
function S(Zo,$o,Jo){const ep=Array(Jo);let tp;for(tp=0;tp<Zo;++tp)ep[tp]=$o[tp];for(tp=Zo;tp<Jo;++tp)ep[tp]=$o[tp+1];return ep}// removeAll :: (a -> boolean) -> [a] -> [a]
// remove all elements matching a predicate
function I(Zo,$o){const Jo=$o.length,ep=Array(Jo);let tp=0;for(let rp,op=0;op<Jo;++op)rp=$o[op],Zo(rp)||(ep[tp]=rp,++tp);return ep.length=tp,ep}// findIndex :: a -> [a] -> Int
// find index of x in a, from the left
function T(Zo,$o){for(let Jo=0,ep=$o.length;Jo<ep;++Jo)if(Zo===$o[Jo])return Jo;return-1}// isArrayLike :: * -> boolean
// Return true iff x is array-like
function C(Zo){return null!=Zo&&'number'==typeof Zo.length&&'function'!=typeof Zo}/** @license MIT License (c) copyright 2010-2016 original author or authors */// id :: a -> a
// curry2 :: ((a, b) -> c) -> (a -> b -> c)
function N(Zo){function $o(Jo,ep){switch(arguments.length){case 0:return $o;case 1:return tp=>Zo(Jo,tp);default:return Zo(Jo,ep);}}return $o}// curry3 :: ((a, b, c) -> d) -> (a -> b -> c -> d)
/** @license MIT License (c) copyright 2016 original author or authors *//** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Create a new Disposable which will dispose its underlying resource.
 * @param {function} dispose function
 * @param {*?} data any data to be passed to disposer function
 * @constructor
 */function B(Zo,$o){this._dispose=Zo,this._data=$o}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function W(){this.disposable=void 0,this.disposed=!1,this._resolve=void 0;var Zo=this;this.result=new Promise(function($o){Zo._resolve=$o})}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function V(Zo){return null!==Zo&&'object'==typeof Zo&&'function'==typeof Zo.then}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Call disposable.dispose.  If it returns a promise, catch promise
 * error and forward it through the provided sink.
 * @param {number} t time
 * @param {{dispose: function}} disposable
 * @param {{error: function}} sink
 * @return {*} result of disposable.dispose
 */function M(Zo,$o,Jo){var ep=O($o);return V(ep)?ep.catch(function(tp){Jo.error(Zo,tp)}):ep}/**
 * Create a new Disposable which will dispose its underlying resource
 * at most once.
 * @param {function} dispose function
 * @param {*?} data any data to be passed to disposer function
 * @return {Disposable}
 */function D(Zo,$o){return K(new B(Zo,$o))}/**
 * Create a noop disposable. Can be used to satisfy a Disposable
 * requirement when no actual resource needs to be disposed.
 * @return {Disposable|exports|module.exports}
 */function P(){return new B(So,void 0)}/**
 * Create a disposable that will dispose all input disposables in parallel.
 * @param {Array<Disposable>} disposables
 * @return {Disposable}
 */function L(Zo){return D(U,Zo)}function U(Zo){return Promise.all(E(O,Zo))}function O(Zo){try{return Zo.dispose()}catch($o){return Promise.reject($o)}}/**
 * Create a disposable from a promise for another disposable
 * @param {Promise<Disposable>} disposablePromise
 * @return {Disposable}
 *//**
 * Create a disposable proxy that allows its underlying disposable to
 * be set later.
 * @return {SettableDisposable}
 */function H(){return new W}/**
 * Wrap an existing disposable (which may not already have been once()d)
 * so that it will only dispose its underlying resource at most once.
 * @param {{ dispose: function() }} disposable
 * @return {Disposable} wrapped disposable
 */function K(Zo){return new B(F,Q(Zo))}function F(Zo){return Zo.disposed||(Zo.disposed=!0,Zo.value=O(Zo.disposable),Zo.disposable=void 0),Zo.value}function Q(Zo){return{disposed:!1,disposable:Zo,value:void 0}}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function G(Zo){setTimeout(function(){throw Zo},0)}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function X(Zo,$o,Jo){this._run=Zo,this.value=$o,this.sink=Jo,this.active=!0}function Y(Zo,$o,Jo){Jo.error(Zo,$o)}function Z(Zo,$o,Jo){Jo.event(Zo,$o)}function $(Zo,$o,Jo){Jo.end(Zo,$o)}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Stream containing only x
 * @param {*} x
 * @returns {Stream}
 */function J(Zo){return new v(new ee(Zo))}function ee(Zo){this.value=Zo}function te(Zo,$o,Jo){Jo.event(Zo,$o),Jo.end(Zo,void 0)}/**
 * Stream containing no events and ends immediately
 * @returns {Stream}
 */function re(){return Co}function oe(){}function pe(Zo){return Zo.dispose()}/**
 * Stream containing no events and never ends
 * @returns {Stream}
 */function se(){return No}function ne(){}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function ie(Zo){return new v(new ue(Zo))}function ue(Zo){this.array=Zo}function ae(Zo,$o,Jo){for(var ep=0,tp=$o.length;ep<tp&&this.active;++ep)Jo.event(Zo,$o[ep]);this.active&&function(op){Jo.end(op)}(Zo)}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//*global Set, Symbol*/function de(Zo){return'function'==typeof Zo[qo]}function ce(Zo){return Zo[qo]()}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function ye(Zo){return new v(new le(Zo))}function le(Zo){this.iterable=Zo}function ve(Zo,$o,Jo){let ep=$o.next();for(;!ep.done&&this.active;)Jo.event(Zo,ep.value),ep=$o.next();Jo.end(Zo,ep.value)}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function ke(Zo){// eslint-disable-line complexity
var $o=null;if(Zo){// Access foreign method only once
var Jo=Zo[Wo];if('function'==typeof Jo&&($o=Jo.call(Zo),!($o&&'function'==typeof $o.subscribe)))throw new TypeError('invalid observable '+$o)}return $o}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function he(Zo){return new v(new fe(Zo))}function fe(Zo){this.observable=Zo}function me(Zo,$o){this.sink=Zo,this.scheduler=$o}function _e(Zo){return Zo.unsubscribe()}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Create a stream that emits the current time periodically
 * @param {Number} period periodicity of events in millis
 * @param {*} deprecatedValue @deprecated value to emit each period
 * @returns {Stream} new stream that emits the current time every period
 *//** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function be(Zo,$o,Jo,ep){this.time=Zo,this.period=$o,this.task=Jo,this.scheduler=ep,this.active=!0}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function ge(Zo){return Promise.resolve(Zo).then(xe)}function xe(Zo){try{return Zo.run()}catch($o){return Zo.error($o)}}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function we(Zo,$o){this.timer=Zo,this.timeline=$o,this._timer=null,this._nextArrival=1/0;var Jo=this;this._runReadyTasksBound=function(){Jo._runReadyTasks(Jo.now())}}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//*global setTimeout, clearTimeout*/function Ee(){}function je(Zo){this.f=Zo,this.active=!0}function Re(Zo){var $o=new je(Zo);return ge($o),$o}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function Ae(){this.tasks=[]}function Se(Zo,$o,Jo){// eslint-disable-line complexity
var ep=$o.events;for(var tp=0;tp<ep.length;++tp){var rp=ep[tp];rp.active&&(Zo(rp),0<=rp.period&&rp.active&&(rp.time=rp.time+rp.period,Ie(rp,Jo)))}return Jo}function Ie(Zo,$o){// eslint-disable-line complexity
var Jo=$o.length;if(0===Jo)return void $o.push(Ne(Zo.time,[Zo]));var ep=Ce(Zo.time,$o);ep>=Jo?$o.push(Ne(Zo.time,[Zo])):Zo.time===$o[ep].time?$o[ep].events.push(Zo):$o.splice(ep,0,Ne(Zo.time,[Zo]))}function Te(Zo,$o){$o.events=I(Zo,$o.events)}function Ce(Zo,$o){for(// eslint-disable-line complexity
var tp,rp,Jo=0,ep=$o.length;Jo<ep;){if(tp=Math.floor((Jo+ep)/2),rp=$o[tp],Zo===rp.time)return tp;Zo<rp.time?ep=tp:Jo=tp+1}return ep}function Ne(Zo,$o){return{time:Zo,events:$o}}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function qe(Zo,$o){if(null==Zo||'object'!=typeof Zo)throw new TypeError('subscriber must be an object');var Jo=H(),ep=new Be(G,Zo,Jo);return Jo.setDisposable($o.source.run(ep,Vo)),new We(Jo)}function Be(Zo,$o,Jo){this.fatalError=Zo,this.subscriber=$o,this.disposable=Jo}function We(Zo){this.disposable=Zo}function Ve(Zo,$o,Jo,ep,tp,rp){Promise.resolve(tp.dispose()).then(function(){'function'==typeof Jo&&Jo.call($o,rp)}).catch(function(op){'function'==typeof ep&&ep.call($o,op)}).catch(Zo)}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function Me(Zo,$o){return Zo($o)}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function De(Zo,$o,Jo){try{Jo.event(Zo,$o)}catch(ep){Jo.error(Zo,ep)}}function Pe(Zo,$o,Jo){try{Jo.end(Zo,$o)}catch(ep){Jo.error(Zo,ep)}}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Create a stream from an EventTarget, such as a DOM Node, or EventEmitter.
 * @param {String} event event type name, e.g. 'click'
 * @param {EventTarget|EventEmitter} source EventTarget or EventEmitter
 * @param {*?} capture for DOM events, whether to use
 *  capturing--passed as 3rd parameter to addEventListener.
 * @returns {Stream} stream containing all events of the specified type
 * from the source.
 *//** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function ze(Zo){return Le(Zo,Vo)}function Le(Zo,$o){return new Promise(function(Jo,ep){Ue(Zo,$o,Jo,ep)})}function Ue(Zo,$o,Jo,ep){var tp=H(),rp=new Oe(Jo,ep,tp);tp.setDisposable(Zo.run(rp,$o))}function Oe(Zo,$o,Jo){this._end=Zo,this._error=$o,this._disposable=Jo,this.active=!0}function He(Zo,$o,Jo,ep){Promise.resolve(Jo.dispose()).then(function(){Zo(ep)},$o)}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * A sink mixin that simply forwards event, end, and error to
 * another sink.
 * @param sink
 * @constructor
 */function Ke(Zo){this.sink=Zo}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function Fe(Zo,$o){this.p=Zo,this.source=$o}/**
 * Create a filtered source, fusing adjacent filter.filter if possible
 * @param {function(x:*):boolean} p filtering predicate
 * @param {{run:function}} source source to filter
 * @returns {Filter} filtered source
 */function Qe(Zo,$o){this.p=Zo,this.sink=$o}function Ge(Zo,$o){return function(Jo){return Zo(Jo)&&$o(Jo)}}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function Xe(Zo,$o,Jo){this.p=Zo,this.f=$o,this.source=Jo}function Ye(Zo,$o,Jo){this.p=Zo,this.f=$o,this.sink=Jo}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function Ze(Zo,$o){this.f=Zo,this.source=$o}/**
 * Create a mapped source, fusing adjacent map.map, filter.map,
 * and filter.map.map if possible
 * @param {function(*):*} f mapping function
 * @param {{run:function}} source source to map
 * @returns {Map|FilterMap} mapped source, possibly fused
 */function $e(Zo,$o){this.f=Zo,this.sink=$o}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Transform each value in the stream by applying f to each
 * @param {function(*):*} f mapping function
 * @param {Stream} stream stream to map
 * @returns {Stream} stream containing items transformed by f
 */function Je(Zo,$o){return new v(Ze.create(Zo,$o.source))}/**
* Replace each value in the stream with x
* @param {*} x
* @param {Stream} stream
* @returns {Stream} stream containing items replaced with x
*/function et(Zo,$o){return Je(function(){return Zo},$o)}/**
* Perform a side effect for each item in the stream
* @param {function(x:*):*} f side effect to execute for each item. The
*  return value will be discarded.
* @param {Stream} stream stream to tap
* @returns {Stream} new stream containing the same items as this stream
*/function tt(Zo,$o){return new v(new rt(Zo,$o.source))}function rt(Zo,$o){this.source=$o,this.f=Zo}function ot(Zo,$o){this.sink=$o,this.f=Zo}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Observe all the event values in the stream in time order. The
 * provided function `f` will be called for each event value
 * @param {function(x:T):*} f function to call with each event value
 * @param {Stream<T>} stream stream to observe
 * @return {Promise} promise that fulfills after the stream ends without
 *  an error, or rejects if the stream ends with an error.
 */function pt(Zo,$o){return nt(tt(Zo,$o))}/**
 * "Run" a stream by creating demand and consuming all events
 * @param {Stream<T>} stream stream to drain
 * @return {Promise} promise that fulfills after the stream ends without
 *  an error, or rejects if the stream ends with an error.
 */function nt(Zo){return ze(Zo.source)}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Generalized feedback loop. Call a stepper function for each event. The stepper
 * will be called with 2 params: the current seed and the an event value.  It must
 * return a new { seed, value } pair. The `seed` will be fed back into the next
 * invocation of stepper, and the `value` will be propagated as the event value.
 * @param {function(seed:*, value:*):{seed:*, value:*}} stepper loop step function
 * @param {*} seed initial seed value passed to first stepper call
 * @param {Stream} stream event stream
 * @returns {Stream} new stream whose values are the `value` field of the objects
 * returned by the stepper
 */function it(Zo,$o,Jo){return new v(new ut(Zo,$o,Jo.source))}function ut(Zo,$o,Jo){this.step=Zo,this.seed=$o,this.source=Jo}function ct(Zo,$o,Jo){this.step=Zo,this.seed=$o,this.sink=Jo}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Create a stream containing successive reduce results of applying f to
 * the previous reduce result and the current stream item.
 * @param {function(result:*, x:*):*} f reducer function
 * @param {*} initial initial value
 * @param {Stream} stream stream to scan
 * @returns {Stream} new stream containing successive reduce results
 */function yt(Zo,$o,Jo){return new v(new lt(Zo,$o,Jo.source))}function lt(Zo,$o,Jo){this.source=Jo,this.f=Zo,this.value=$o}function vt(Zo,$o,Jo){this.f=Zo,this.value=$o,this.sink=Jo}/**
* Reduce a stream to produce a single result.  Note that reducing an infinite
* stream will return a Promise that never fulfills, but that may reject if an error
* occurs.
* @param {function(result:*, x:*):*} f reducer function
* @param {*} initial initial value
* @param {Stream} stream to reduce
* @returns {Promise} promise for the file result of the reduce
*/function kt(Zo,$o,Jo){return ze(new ht(Zo,$o,Jo.source))}function ht(Zo,$o,Jo){this.source=Jo,this.f=Zo,this.value=$o}function ft(Zo,$o,Jo){this.f=Zo,this.value=$o,this.sink=Jo}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Compute a stream by unfolding tuples of future values from a seed value
 * Event times may be controlled by returning a Promise from f
 * @param {function(seed:*):{value:*, seed:*, done:boolean}|Promise<{value:*, seed:*, done:boolean}>} f unfolding function accepts
 *  a seed and returns a new tuple with a value, new seed, and boolean done flag.
 *  If tuple.done is true, the stream will end.
 * @param {*} seed seed value
 * @returns {Stream} stream containing all value of all tuples produced by the
 *  unfolding function.
 *//** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Compute a stream by iteratively calling f to produce values
 * Event times may be controlled by returning a Promise from f
 * @param {function(x:*):*|Promise<*>} f
 * @param {*} x initial value
 * @returns {Stream}
 *//** @license MIT License (c) copyright 2010-2014 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Compute a stream using an *async* generator, which yields promises
 * to control event times.
 * @param f
 * @returns {Stream}
 *//** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function mt(Zo,$o){return new v(new _t(Zo,$o.source))}function _t(Zo,$o){this.f=Zo,this.source=$o}function bt(Zo,$o,Jo,ep){this.f=Zo,this.sink=Jo,this.scheduler=ep,this.active=!0,this.disposable=K($o.run(this,ep))}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * @param {*} x value to prepend
 * @param {Stream} stream
 * @returns {Stream} new stream with x prepended
 */function gt(Zo,$o){return xt(J(Zo),$o)}/**
* @param {Stream} left
* @param {Stream} right
* @returns {Stream} new stream containing all events in left followed by all
*  events in right.  This *timeshifts* right to the end of left.
*/function xt(Zo,$o){return mt(function(){return $o},Zo)}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function wt(Zo,$o){this.sink=$o,this.index=Zo,this.active=!0,this.value=void 0}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function Et(Zo,$o){/*eslint complexity: [2,7]*/switch($o.length){case 0:return Zo();case 1:return Zo($o[0]);case 2:return Zo($o[0],$o[1]);case 3:return Zo($o[0],$o[1],$o[2]);case 4:return Zo($o[0],$o[1],$o[2],$o[3]);case 5:return Zo($o[0],$o[1],$o[2],$o[3],$o[4]);default:return Zo.apply(void 0,$o);}}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Combine latest events from all input streams
 * @param {function(...events):*} f function to combine most recent events
 * @returns {Stream} stream containing the result of applying f to the most recent
 *  event of each input stream, whenever a new event arrives on any stream.
 */function jt(Zo/*, ...streams */){return Rt(Zo,w(arguments))}/**
* Combine latest events from all input streams
* @param {function(...events):*} f function to combine most recent events
* @param {[Stream]} streams most recent events
* @returns {Stream} stream containing the result of applying f to the most recent
*  event of each input stream, whenever a new event arrives on any stream.
*/function Rt(Zo,$o){var Jo=$o.length;return 0===Jo?re():1===Jo?Je(Zo,$o[0]):new v(At(Zo,$o))}function At(Zo,$o){return new It(Zo,E(St,$o))}function St(Zo){return Zo.source}function It(Zo,$o){this.f=Zo,this.sources=$o}function Tt(Zo,$o,Jo,ep){this.sink=Jo,this.disposables=Zo,this.sinks=$o,this.f=ep;var tp=$o.length;this.awaiting=tp,this.values=Array(tp),this.hasValue=Array(tp);for(var rp=0;rp<tp;++rp)this.hasValue[rp]=!1;this.activeCount=$o.length}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Assume fs is a stream containing functions, and apply the latest function
 * in fs to the latest value in xs.
 * fs:         --f---------g--------h------>
 * xs:         -a-------b-------c-------d-->
 * ap(fs, xs): --fa-----fb-gb---gc--hc--hd->
 * @param {Stream} fs stream of functions to apply to the latest x
 * @param {Stream} xs stream of values to which to apply all the latest f
 * @returns {Stream} stream containing all the applications of fs to xs
 */function Ct(Zo,$o){return jt(To,Zo,$o)}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Transform a stream by passing its events through a transducer.
 * @param  {function} transducer transducer function
 * @param  {Stream} stream stream whose events will be passed through the
 *  transducer
 * @return {Stream} stream of events transformed by the transducer
 */function Nt(Zo,$o){return new v(new qt(Zo,$o.source))}function qt(Zo,$o){this.transducer=Zo,this.source=$o}function Bt(Zo,$o){this.xf=Zo,this.sink=$o}function Wt(Zo){this.time=-(1/0),this.sink=Zo}/**
* Given an object supporting the new or legacy transducer protocol,
* create an adapter for it.
* @param {object} tx transform
* @returns {TxAdapter|LegacyTxAdapter}
*/function Vt(Zo){return'function'==typeof Zo['@@transducer/step']?new Mt(Zo):new Dt(Zo)}/**
* Adapter for new official transducer protocol
* @param {object} tx transform
* @constructor
*/function Mt(Zo){this.tx=Zo}/**
* Adapter for older transducer protocol
* @param {object} tx transform
* @constructor
*/function Dt(Zo){this.tx=Zo}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Doubly linked list
 * @constructor
 */function Pt(){this.head=null,this.length=0}/**
 * Add a node to the end of the list
 * @param {{prev:Object|null, next:Object|null, dispose:function}} x node to add
 *//** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function zt(Zo,$o){return Lt(So,Zo,$o)}function Lt(Zo,$o,Jo){return new v(new Ut(Zo,$o,Jo.source))}function Ut(Zo,$o,Jo){this.f=Zo,this.concurrency=$o,this.source=Jo}function Ot(Zo,$o,Jo,ep,tp){this.f=Zo,this.concurrency=$o,this.sink=ep,this.scheduler=tp,this.pending=[],this.current=new Pt,this.disposable=K(Jo.run(this,tp)),this.active=!0}function Ht(Zo,$o,Jo,ep){return Zo($o).source.run(Jo,ep)}function Kt(Zo,$o,Jo){this.prev=this.next=null,this.time=Zo,this.outer=$o,this.sink=Jo,this.disposable=void 0}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Map each value in the stream to a new stream, and merge it into the
 * returned outer stream. Event arrival times are preserved.
 * @param {function(x:*):Stream} f chaining function, must return a Stream
 * @param {Stream} stream
 * @returns {Stream} new stream containing all events from each stream returned by f
 */function Ft(Zo,$o){return Lt(Zo,1/0,$o)}/**
 * Monadic join. Flatten a Stream<Stream<X>> to Stream<X> by merging inner
 * streams to the outer. Event arrival times are preserved.
 * @param {Stream<Stream<X>>} stream stream of streams
 * @returns {Stream<X>} new stream containing all events of all inner streams
 */function Qt(Zo){return zt(1/0,Zo)}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Map each value in stream to a new stream, and concatenate them all
 * stream:              -a---b---cX
 * f(a):                 1-1-1-1X
 * f(b):                        -2-2-2-2X
 * f(c):                                -3-3-3-3X
 * stream.concatMap(f): -1-1-1-1-2-2-2-2-3-3-3-3X
 * @param {function(x:*):Stream} f function to map each value to a stream
 * @param {Stream} stream
 * @returns {Stream} new stream containing all events from each stream returned by f
 */function Gt(Zo,$o){return Lt(Zo,1,$o)}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * @returns {Stream} stream containing events from all streams in the argument
 * list in time order.  If two events are simultaneous they will be merged in
 * arbitrary order.
 *//**
 * @param {Array} streams array of stream to merge
 * @returns {Stream} stream containing events from all input observables
 * in time order.  If two events are simultaneous they will be merged in
 * arbitrary order.
 */function Xt(Zo){var $o=Zo.length;return 0===$o?re():1===$o?Zo[0]:new v(Yt(Zo))}/**
 * This implements fusion/flattening for merge.  It will
 * fuse adjacent merge operations.  For example:
 * - a.merge(b).merge(c) effectively becomes merge(a, b, c)
 * - merge(a, merge(b, c)) effectively becomes merge(a, b, c)
 * It does this by concatenating the sources arrays of
 * any nested Merge sources, in effect "flattening" nested
 * merge operations into a single merge.
 */function Yt(Zo){return new $t(Mo(Zt,[],Zo))}function Zt(Zo,$o){var Jo=$o.source;return Jo instanceof $t?Zo.concat(Jo.sources):Zo.concat(Jo)}function $t(Zo){this.sources=Zo}function Jt(Zo,$o,Jo){this.sink=Jo,this.disposables=Zo,this.activeCount=$o.length}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * When an event arrives on sampler, emit the result of calling f with the latest
 * values of all streams being sampled
 * @param {function(...values):*} f function to apply to each set of sampled values
 * @param {Stream} sampler streams will be sampled whenever an event arrives
 *  on sampler
 * @returns {Stream} stream of sampled and transformed values
 *//**
 * When an event arrives on sampler, emit the latest event value from stream.
 * @param {Stream} sampler stream of events at whose arrival time
 *  stream's latest value will be propagated
 * @param {Stream} stream stream of values
 * @returns {Stream} sampled stream of values
 */function er(Zo,$o){return new v(new or(So,Zo.source,[$o.source]))}function tr(Zo,$o,Jo){return new v(new or(Zo,$o.source,E(rr,Jo)))}function rr(Zo){return Zo.source}function or(Zo,$o,Jo){this.f=Zo,this.sampler=$o,this.sources=Jo}function pr(Zo){this.sink=Zo,this.hasValue=!1}function sr(Zo,$o,Jo){this.f=Zo,this.sinks=$o,this.sink=Jo,this.active=!1}function nr(Zo){return Zo.hasValue}function ir(Zo){return Zo.value}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */// Based on https://github.com/petkaantonov/deque
function ur(Zo){this._capacity=Zo||32,this._length=0,this._head=0}function ar(Zo,$o,Jo,ep,tp){for(var rp=0;rp<tp;++rp)Jo[rp+ep]=Zo[rp+$o],Zo[rp+$o]=void 0}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Combine streams pairwise (or tuple-wise) by index by applying f to values
 * at corresponding indices.  The returned stream ends when any of the input
 * streams ends.
 * @param {function} f function to combine values
 * @returns {Stream} new stream with items at corresponding indices combined
 *  using f
 *//**
* Combine streams pairwise (or tuple-wise) by index by applying f to values
* at corresponding indices.  The returned stream ends when any of the input
* streams ends.
* @param {function} f function to combine values
* @param {[Stream]} streams streams to zip using f
* @returns {Stream} new stream with items at corresponding indices combined
*  using f
*/function dr(Zo,$o){return 0===$o.length?re():1===$o.length?Je(Zo,$o[0]):new v(new yr(Zo,Do(cr,$o)))}function cr(Zo){return Zo.source}function yr(Zo,$o){this.f=Zo,this.sources=$o}function lr(Zo,$o,Jo,ep){this.f=Zo,this.sinks=Jo,this.sink=ep,this.buffers=$o}function vr(Zo,$o,Jo,ep){ep.event($o,Et(Zo,Do(kr,Jo)))}function kr(Zo){return Zo.shift()}function hr(Zo,$o){for(var Jo=0,ep=Zo.length;Jo<ep;++Jo)if(Zo[Jo].isEmpty()&&!$o[Jo].active)return!0;return!1}function fr(Zo){for(var $o=0,Jo=Zo.length;$o<Jo;++$o)if(Zo[$o].isEmpty())return!1;return!0}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Given a stream of streams, return a new stream that adopts the behavior
 * of the most recent inner stream.
 * @param {Stream} stream of streams on which to switch
 * @returns {Stream} switching stream
 */function mr(Zo){return new v(new _r(Zo.source))}function _r(Zo){this.source=Zo}function br(Zo,$o){this.sink=Zo,this.scheduler=$o,this.current=null,this.ended=!1}function gr(Zo,$o,Jo,ep){this.min=Zo,this.max=$o,this.outer=Jo,this.sink=ep,this.disposable=P()}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Retain only items matching a predicate
 * @param {function(x:*):boolean} p filtering predicate called for each item
 * @param {Stream} stream stream to filter
 * @returns {Stream} stream containing only items for which predicate returns truthy
 */function xr(Zo,$o){return new v(Fe.create(Zo,$o.source))}/**
 * Skip repeated events, using === to detect duplicates
 * @param {Stream} stream stream from which to omit repeated events
 * @returns {Stream} stream without repeated events
 */function wr(Zo){return Er(Ar,Zo)}/**
 * Skip repeated events using the provided equals function to detect duplicates
 * @param {function(a:*, b:*):boolean} equals optional function to compare items
 * @param {Stream} stream stream from which to omit repeated events
 * @returns {Stream} stream without repeated events
 */function Er(Zo,$o){return new v(new jr(Zo,$o.source))}function jr(Zo,$o){this.equals=Zo,this.source=$o}function Rr(Zo,$o){this.equals=Zo,this.sink=$o,this.value=void 0,this.init=!0}function Ar(Zo,$o){return Zo===$o}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * @param {number} n
 * @param {Stream} stream
 * @returns {Stream} new stream containing only up to the first n items from stream
 */function Sr(Zo,$o){return Tr(0,Zo,$o)}/**
 * @param {number} n
 * @param {Stream} stream
 * @returns {Stream} new stream with the first n items removed
 */function Ir(Zo,$o){return Tr(Zo,1/0,$o)}/**
 * Slice a stream by index. Negative start/end indexes are not supported
 * @param {number} start
 * @param {number} end
 * @param {Stream} stream
 * @returns {Stream} stream containing items where start <= index < end
 */function Tr(Zo,$o,Jo){return $o<=Zo?re():new v(Cr(Zo,$o,Jo.source))}function Cr(Zo,$o,Jo){return Jo instanceof Ze?Nr(Zo,$o,Jo):Jo instanceof Br?qr(Zo,$o,Jo):new Br(Zo,$o,Jo)}function Nr(Zo,$o,Jo){return Ze.create(Jo.f,Cr(Zo,$o,Jo.source))}function qr(Zo,$o,Jo){return Zo+=Jo.min,$o=Math.min($o+Jo.min,Jo.max),new Br(Zo,$o,Jo.source)}function Br(Zo,$o,Jo){this.source=Jo,this.min=Zo,this.max=$o}function Wr(Zo,$o,Jo,ep,tp){this.sink=ep,this.skip=Zo,this.take=$o,this.disposable=K(Jo.run(this,tp))}function Vr(Zo,$o){return new v(new Mr(Zo,$o.source))}function Mr(Zo,$o){this.p=Zo,this.source=$o}function Dr(Zo,$o,Jo,ep){this.p=Zo,this.sink=Jo,this.active=!0,this.disposable=K($o.run(this,ep))}function Pr(Zo,$o){return new v(new zr(Zo,$o.source))}function zr(Zo,$o){this.p=Zo,this.source=$o}function Lr(Zo,$o){this.p=Zo,this.sink=$o,this.skipping=!0}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function Ur(Zo,$o){return new v(new Kr(Zo.source,$o.source))}function Or(Zo,$o){return new v(new Fr(Zo.source,$o.source))}function Hr(Zo,$o){return Ur(Qt(Zo),Or(Zo,$o))}function Kr(Zo,$o){this.maxSignal=Zo,this.source=$o}function Fr(Zo,$o){this.minSignal=Zo,this.source=$o}function Qr(Zo,$o){this.value=Zo,this.sink=$o}function Gr(Zo,$o,Jo){this.min=Zo,this.max=$o,this.sink=Jo}function Xr(Zo,$o,Jo){this.value=1/0,this.sink=$o,this.disposable=Zo.run(this,Jo)}function Yr(Zo,$o,Jo){this.value=1/0,this.sink=$o,this.disposable=Zo.run(this,Jo)}function Zr(){}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * @param {Number} delayTime milliseconds to delay each item
 * @param {Stream} stream
 * @returns {Stream} new stream containing the same items, but delayed by ms
 */function $r(Zo,$o){return 0>=Zo?$o:new v(new Jr(Zo,$o.source))}function Jr(Zo,$o){this.dt=Zo,this.source=$o}function eo(Zo,$o,Jo){this.dt=Zo,this.sink=$o,this.scheduler=Jo}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function to(Zo){return new v(new ro(Zo.source))}function ro(Zo){this.source=Zo}function oo(Zo){this.sink=Zo}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Limit the rate of events by suppressing events that occur too often
 * @param {Number} period time to suppress events
 * @param {Stream} stream
 * @returns {Stream}
 */function po(Zo,$o){return new v(so(Zo,$o.source))}function so(Zo,$o){return $o instanceof Ze?no(Zo,$o):$o instanceof uo?io(Zo,$o):new uo(Zo,$o)}function no(Zo,$o){return Ze.create($o.f,so(Zo,$o.source))}function io(Zo,$o){return new uo(Math.max(Zo,$o.period),$o.source)}function uo(Zo,$o){this.period=Zo,this.source=$o}function ao(Zo,$o){this.time=0,this.period=Zo,this.sink=$o}/**
 * Wait for a burst of events to subside and emit only the last event in the burst
 * @param {Number} period events occuring more frequently than this
 *  will be suppressed
 * @param {Stream} stream stream to debounce
 * @returns {Stream} new debounced stream
 */function co(Zo,$o){return new v(new yo(Zo,$o.source))}function yo(Zo,$o){this.dt=Zo,this.source=$o}function vo(Zo,$o,Jo,ep){this.dt=Zo,this.sink=Jo,this.scheduler=ep,this.value=void 0,this.timer=null;var tp=$o.run(this,ep);this.disposable=L([this,tp])}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * Create a stream containing only the promise's fulfillment
 * value at the time it fulfills.
 * @param {Promise<T>} p promise
 * @return {Stream<T>} stream containing promise's fulfillment value.
 *  If the promise rejects, the stream will error
 *//**
 * Turn a Stream<Promise<T>> into Stream<T> by awaiting each promise.
 * Event order is preserved.
 * @param {Stream<Promise<T>>} stream
 * @return {Stream<T>} stream of fulfillment values.  The stream will
 * error if any promise rejects.
 */function ko(Zo){return new v(new ho(Zo.source))}function ho(Zo){this.source=Zo}function fo(Zo,$o){this.sink=Zo,this.scheduler=$o,this.queue=Promise.resolve();var Jo=this;// Pre-create closures, to avoid creating them per event
this._eventBound=function(ep){Jo.sink.event(Jo.scheduler.now(),ep)},this._endBound=function(ep){Jo.sink.end(Jo.scheduler.now(),ep)},this._errorBound=function(ep){Jo.sink.error(Jo.scheduler.now(),ep)}}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */function mo(Zo){this.sink=Zo,this.active=!0}/**
 * Create a stream containing only an error
 * @param {*} e error value, preferably an Error or Error subtype
 * @returns {Stream} new stream containing only an error
 */function _o(Zo,$o){this.f=Zo,this.source=$o}function bo(Zo,$o,Jo,ep){this.f=Zo,this.sink=new mo(Jo),this.scheduler=ep,this.disposable=$o.run(this,ep)}function go(Zo,$o,Jo){try{Jo.event(Zo,$o)}catch(ep){Jo.error(Zo,ep)}}function xo(Zo,$o,Jo){try{Jo.end(Zo,$o)}catch(ep){Jo.error(Zo,ep)}}function wo(Zo){var $o=Zo.source;return $o instanceof Oo?Zo:new Zo.constructor(new Oo($o))}/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann */// Add of and empty to constructor for fantasy-land compat
function Eo(Zo,$o){var Jo=Zo.length;for(var ep=0;ep<Jo;++ep)$o.event(Vo.now(),Zo[ep])}function jo(Zo,$o,Jo){return $o.length===Jo?h(Zo,m(1,$o)):h(Zo,$o)}function Ro(Zo){return new Ko(new Oo(Zo.source))}function Ao(Zo){return new Fo(new Oo(Zo.source))}const So=Zo=>Zo,Io=(Zo,$o)=>Jo=>Zo($o(Jo)),To=(Zo,$o)=>Zo($o);// compose :: (b -> c) -> (a -> b) -> (a -> c)
// apply :: (a -> b) -> a -> b
B.prototype.dispose=function(){return this._dispose(this._data)},W.prototype.setDisposable=function(Zo){if(void 0!==this.disposable)throw new Error('setDisposable called more than once');this.disposable=Zo,this.disposed&&this._resolve(Zo.dispose())},W.prototype.dispose=function(){return this.disposed?this.result:(this.disposed=!0,void 0!==this.disposable&&(this.result=this.disposable.dispose()),this.result)},X.event=function(Zo,$o){return new X(Z,Zo,$o)},X.end=function(Zo,$o){return new X($,Zo,$o)},X.error=function(Zo,$o){return new X(Y,Zo,$o)},X.prototype.dispose=function(){this.active=!1},X.prototype.run=function(Zo){this.active&&this._run(Zo,this.value,this.sink)},X.prototype.error=function(Zo,$o){return this.active?void this.sink.error(Zo,$o):G($o)},ee.prototype.run=function(Zo,$o){return $o.asap(new X(te,this.value,Zo))},oe.prototype.run=function(Zo,$o){var Jo=X.end(void 0,Zo);return $o.asap(Jo),D(pe,Jo)};var Co=new v(new oe());ne.prototype.run=function(){return P()};var No=new v(new ne());ue.prototype.run=function(Zo,$o){return $o.asap(new X(ae,this.array,Zo))};var qo;// Firefox ships a partial implementation using the name @@iterator.
// https://bugzilla.mozilla.org/show_bug.cgi?id=907077#c14
qo='function'==typeof Set&&'function'==typeof new Set()['@@iterator']?'@@iterator':'function'==typeof Symbol&&Symbol.iterator||'_es6shim_iterator_',le.prototype.run=function(Zo,$o){return $o.asap(new X(ve,ce(this.iterable),Zo))};/* global window */var Bo;Bo='undefined'==typeof self?'undefined'==typeof window?'undefined'==typeof global?'undefined'==typeof module?Function('return this')():module:global:window:self;var Wo=function($o){var Jo,ep=$o.Symbol;return'function'==typeof ep?ep.observable?Jo=ep.observable:(Jo=ep('observable'),ep.observable=Jo):Jo='@@observable',Jo}(Bo);fe.prototype.run=function(Zo,$o){var Jo=this.observable.subscribe(new me(Zo,$o));if('function'==typeof Jo)return D(Jo);if(Jo&&'function'==typeof Jo.unsubscribe)return D(_e,Jo);throw new TypeError('Observable returned invalid subscription '+(Jo+''))},me.prototype.next=function(Zo){this.sink.event(this.scheduler.now(),Zo)},me.prototype.complete=function(Zo){this.sink.end(this.scheduler.now(),Zo)},me.prototype.error=function(Zo){this.sink.error(this.scheduler.now(),Zo)},be.prototype.run=function(){return this.task.run(this.time)},be.prototype.error=function(Zo){return this.task.error(this.time,Zo)},be.prototype.dispose=function(){return this.scheduler.cancel(this),this.task.dispose()},we.prototype.now=function(){return this.timer.now()},we.prototype.asap=function(Zo){return this.schedule(0,-1,Zo)},we.prototype.delay=function(Zo,$o){return this.schedule(Zo,-1,$o)},we.prototype.periodic=function(Zo,$o){return this.schedule(0,Zo,$o)},we.prototype.schedule=function(Zo,$o,Jo){var ep=this.now(),tp=new be(ep+Math.max(0,Zo),$o,Jo,this);return this.timeline.add(tp),this._scheduleNextRun(ep),tp},we.prototype.cancel=function(Zo){Zo.active=!1,this.timeline.remove(Zo)&&this._reschedule()},we.prototype.cancelAll=function(Zo){this.timeline.removeAll(Zo),this._reschedule()},we.prototype._reschedule=function(){this.timeline.isEmpty()?this._unschedule():this._scheduleNextRun(this.now())},we.prototype._unschedule=function(){this.timer.clearTimer(this._timer),this._timer=null},we.prototype._scheduleNextRun=function(Zo){// eslint-disable-line complexity
if(!this.timeline.isEmpty()){var $o=this.timeline.nextArrival();null===this._timer?this._scheduleNextArrival($o,Zo):$o<this._nextArrival&&(this._unschedule(),this._scheduleNextArrival($o,Zo))}},we.prototype._scheduleNextArrival=function(Zo,$o){this._nextArrival=Zo;var Jo=Math.max(0,Zo-$o);this._timer=this.timer.setTimer(this._runReadyTasksBound,Jo)},we.prototype._runReadyTasks=function(Zo){this._timer=null,this.timeline.runTasks(Zo,xe),this._scheduleNextRun(this.now())},Ee.prototype.now=Date.now,Ee.prototype.setTimer=function(Zo,$o){return 0>=$o?Re(Zo):setTimeout(Zo,$o)},Ee.prototype.clearTimer=function(Zo){return Zo instanceof je?Zo.cancel():clearTimeout(Zo)},je.prototype.run=function(){return this.active&&this.f()},je.prototype.error=function(Zo){throw Zo},je.prototype.cancel=function(){this.active=!1},Ae.prototype.nextArrival=function(){return this.isEmpty()?1/0:this.tasks[0].time},Ae.prototype.isEmpty=function(){return 0===this.tasks.length},Ae.prototype.add=function(Zo){Ie(Zo,this.tasks)},Ae.prototype.remove=function(Zo){var $o=Ce(Zo.time,this.tasks);if(0<=$o&&$o<this.tasks.length){var Jo=T(Zo,this.tasks[$o].events);if(0<=Jo)return this.tasks[$o].events.splice(Jo,1),!0}return!1},Ae.prototype.removeAll=function(Zo){for(var $o=0,Jo=this.tasks.length;$o<Jo;++$o)Te(Zo,this.tasks[$o])},Ae.prototype.runTasks=function(Zo,$o){for(var Jo=this.tasks,ep=Jo.length,tp=0;tp<ep&&Jo[tp].time<=Zo;)++tp;this.tasks=Jo.slice(tp);// Run all ready tasks
for(var rp=0;rp<tp;++rp)this.tasks=Se($o,Jo[rp],this.tasks)};var Vo=new we(new Ee(),new Ae());Be.prototype.event=function(Zo,$o){this.disposable.disposed||'function'!=typeof this.subscriber.next||this.subscriber.next($o)},Be.prototype.end=function(Zo,$o){if(!this.disposable.disposed){var Jo=this.subscriber;Ve(this.fatalError,Jo,Jo.complete,Jo.error,this.disposable,$o)}},Be.prototype.error=function(Zo,$o){var Jo=this.subscriber;Ve(this.fatalError,Jo,Jo.error,Jo.error,this.disposable,$o)},We.prototype.unsubscribe=function(){this.disposable.dispose()},Oe.prototype.event=function(){},Oe.prototype.end=function(Zo,$o){this.active&&(this.active=!1,He(this._end,this._error,this._disposable,$o))},Oe.prototype.error=function(Zo,$o){this.active=!1,He(this._error,this._error,this._disposable,$o)},Ke.prototype.event=function(Zo,$o){return this.sink.event(Zo,$o)},Ke.prototype.end=function(Zo,$o){return this.sink.end(Zo,$o)},Ke.prototype.error=function(Zo,$o){return this.sink.error(Zo,$o)},Fe.create=function($o,Jo){return Jo instanceof Fe?new Fe(Ge(Jo.p,$o),Jo.source):new Fe($o,Jo)},Fe.prototype.run=function(Zo,$o){return this.source.run(new Qe(this.p,Zo),$o)},Qe.prototype.end=Ke.prototype.end,Qe.prototype.error=Ke.prototype.error,Qe.prototype.event=function(Zo,$o){var Jo=this.p;Jo($o)&&this.sink.event(Zo,$o)},Xe.prototype.run=function(Zo,$o){return this.source.run(new Ye(this.p,this.f,Zo),$o)},Ye.prototype.event=function(Zo,$o){var Jo=this.f,ep=this.p;ep($o)&&this.sink.event(Zo,Jo($o))},Ye.prototype.end=Ke.prototype.end,Ye.prototype.error=Ke.prototype.error,Ze.create=function($o,Jo){return Jo instanceof Ze?new Ze(Io($o,Jo.f),Jo.source):Jo instanceof Fe?new Xe(Jo.p,$o,Jo.source):new Ze($o,Jo)},Ze.prototype.run=function(Zo,$o){// eslint-disable-line no-extend-native
return this.source.run(new $e(this.f,Zo),$o)},$e.prototype.end=Ke.prototype.end,$e.prototype.error=Ke.prototype.error,$e.prototype.event=function(Zo,$o){var Jo=this.f;this.sink.event(Zo,Jo($o))},rt.prototype.run=function(Zo,$o){return this.source.run(new ot(this.f,Zo),$o)},ot.prototype.end=Ke.prototype.end,ot.prototype.error=Ke.prototype.error,ot.prototype.event=function(Zo,$o){var Jo=this.f;Jo($o),this.sink.event(Zo,$o)},ut.prototype.run=function(Zo,$o){return this.source.run(new ct(this.step,this.seed,Zo),$o)},ct.prototype.error=Ke.prototype.error,ct.prototype.event=function(Zo,$o){var Jo=this.step(this.seed,$o);this.seed=Jo.seed,this.sink.event(Zo,Jo.value)},ct.prototype.end=function(Zo){this.sink.end(Zo,this.seed)},lt.prototype.run=function(Zo,$o){var Jo=$o.asap(X.event(this.value,Zo)),ep=this.source.run(new vt(this.f,this.value,Zo),$o);return L([Jo,ep])},vt.prototype.event=function(Zo,$o){var Jo=this.f;this.value=Jo(this.value,$o),this.sink.event(Zo,this.value)},vt.prototype.error=Ke.prototype.error,vt.prototype.end=Ke.prototype.end,ht.prototype.run=function(Zo,$o){return this.source.run(new ft(this.f,this.value,Zo),$o)},ft.prototype.event=function(Zo,$o){var Jo=this.f;this.value=Jo(this.value,$o),this.sink.event(Zo,this.value)},ft.prototype.error=Ke.prototype.error,ft.prototype.end=function(Zo){this.sink.end(Zo,this.value)},_t.prototype.run=function(Zo,$o){return new bt(this.f,this.source,Zo,$o)},bt.prototype.error=Ke.prototype.error,bt.prototype.event=function(Zo,$o){this.active&&this.sink.event(Zo,$o)},bt.prototype.end=function(Zo,$o){this.active&&(M(Zo,this.disposable,this.sink),this._startNext(Zo,$o,this.sink))},bt.prototype._startNext=function(Zo,$o,Jo){try{this.disposable=this._continue(this.f,$o,Jo)}catch(ep){Jo.error(Zo,ep)}},bt.prototype._continue=function(Zo,$o,Jo){return Zo($o).source.run(Jo,this.scheduler)},bt.prototype.dispose=function(){return this.active=!1,this.disposable.dispose()},wt.prototype.event=function(Zo,$o){this.active&&(this.value=$o,this.sink.event(Zo,this))},wt.prototype.end=function(Zo,$o){this.active&&(this.active=!1,this.sink.end(Zo,{index:this.index,value:$o}))},wt.prototype.error=Ke.prototype.error,It.prototype.run=function(Zo,$o){var Jo=this.sources.length,ep=Array(Jo),tp=Array(Jo),rp=new Tt(ep,tp,Zo,this.f);for(var op,pp=0;pp<Jo;++pp)op=tp[pp]=new wt(pp,rp),ep[pp]=this.sources[pp].run(op,$o);return L(ep)},Tt.prototype.error=Ke.prototype.error,Tt.prototype.event=function(Zo,$o){var Jo=$o.index,ep=this._updateReady(Jo);this.values[Jo]=$o.value,0===ep&&this.sink.event(Zo,Et(this.f,this.values))},Tt.prototype._updateReady=function(Zo){return 0<this.awaiting&&!this.hasValue[Zo]&&(this.hasValue[Zo]=!0,this.awaiting-=1),this.awaiting},Tt.prototype.end=function(Zo,$o){M(Zo,this.disposables[$o.index],this.sink),0==--this.activeCount&&this.sink.end(Zo,$o.value)},qt.prototype.run=function(Zo,$o){var Jo=this.transducer(new Wt(Zo));return this.source.run(new Bt(Vt(Jo),Zo),$o)},Bt.prototype.event=function(Zo,$o){var Jo=this.xf.step(Zo,$o);return this.xf.isReduced(Jo)?this.sink.end(Zo,this.xf.getResult(Jo)):Jo},Bt.prototype.end=function(Zo,$o){return this.xf.result($o)},Bt.prototype.error=function(Zo,$o){return this.sink.error(Zo,$o)},Wt.prototype['@@transducer/init']=Wt.prototype.init=function(){},Wt.prototype['@@transducer/step']=Wt.prototype.step=function(Zo,$o){return isNaN(Zo)||(this.time=Math.max(Zo,this.time)),this.sink.event(this.time,$o)},Wt.prototype['@@transducer/result']=Wt.prototype.result=function(Zo){return this.sink.end(this.time,Zo)},Mt.prototype.step=function(Zo,$o){return this.tx['@@transducer/step'](Zo,$o)},Mt.prototype.result=function(Zo){return this.tx['@@transducer/result'](Zo)},Mt.prototype.isReduced=function(Zo){return null!=Zo&&Zo['@@transducer/reduced']},Mt.prototype.getResult=function(Zo){return Zo['@@transducer/value']},Dt.prototype.step=function(Zo,$o){return this.tx.step(Zo,$o)},Dt.prototype.result=function(Zo){return this.tx.result(Zo)},Dt.prototype.isReduced=function(Zo){return null!=Zo&&Zo.__transducers_reduced__},Dt.prototype.getResult=function(Zo){return Zo.value},Pt.prototype.add=function(Zo){null!==this.head&&(this.head.prev=Zo,Zo.next=this.head),this.head=Zo,++this.length},Pt.prototype.remove=function(Zo){--this.length,Zo===this.head&&(this.head=this.head.next),null!==Zo.next&&(Zo.next.prev=Zo.prev,Zo.next=null),null!==Zo.prev&&(Zo.prev.next=Zo.next,Zo.prev=null)},Pt.prototype.isEmpty=function(){return 0===this.length},Pt.prototype.dispose=function(){if(this.isEmpty())return Promise.resolve();var Zo=[],$o=this.head;for(this.head=null,this.length=0;null!==$o;)Zo.push($o.dispose()),$o=$o.next;return Promise.all(Zo)},Ut.prototype.run=function(Zo,$o){return new Ot(this.f,this.concurrency,this.source,Zo,$o)},Ot.prototype.event=function(Zo,$o){this._addInner(Zo,$o)},Ot.prototype._addInner=function(Zo,$o){this.current.length<this.concurrency?this._startInner(Zo,$o):this.pending.push($o)},Ot.prototype._startInner=function(Zo,$o){try{this._initInner(Zo,$o)}catch(Jo){this.error(Zo,Jo)}},Ot.prototype._initInner=function(Zo,$o){var Jo=new Kt(Zo,this,this.sink);Jo.disposable=Ht(this.f,$o,Jo,this.scheduler),this.current.add(Jo)},Ot.prototype.end=function(Zo,$o){this.active=!1,M(Zo,this.disposable,this.sink),this._checkEnd(Zo,$o)},Ot.prototype.error=function(Zo,$o){this.active=!1,this.sink.error(Zo,$o)},Ot.prototype.dispose=function(){return this.active=!1,this.pending.length=0,Promise.all([this.disposable.dispose(),this.current.dispose()])},Ot.prototype._endInner=function(Zo,$o,Jo){this.current.remove(Jo),M(Zo,Jo,this),0===this.pending.length?this._checkEnd(Zo,$o):this._startInner(Zo,this.pending.shift())},Ot.prototype._checkEnd=function(Zo,$o){!this.active&&this.current.isEmpty()&&this.sink.end(Zo,$o)},Kt.prototype.event=function(Zo,$o){this.sink.event(Math.max(Zo,this.time),$o)},Kt.prototype.end=function(Zo,$o){this.outer._endInner(Math.max(Zo,this.time),$o,this)},Kt.prototype.error=function(Zo,$o){this.outer.error(Math.max(Zo,this.time),$o)},Kt.prototype.dispose=function(){return this.disposable.dispose()};var Mo=function($o,Jo,ep){let tp=Jo;for(let rp=0,op=ep.length;rp<op;++rp)tp=$o(tp,ep[rp],rp);return tp};$t.prototype.run=function(Zo,$o){var Jo=this.sources.length,ep=Array(Jo),tp=Array(Jo),rp=new Jt(ep,tp,Zo);for(var op,pp=0;pp<Jo;++pp)op=tp[pp]=new wt(pp,rp),ep[pp]=this.sources[pp].run(op,$o);return L(ep)},Jt.prototype.error=Ke.prototype.error,Jt.prototype.event=function(Zo,$o){this.sink.event(Zo,$o.value)},Jt.prototype.end=function(Zo,$o){M(Zo,this.disposables[$o.index],this.sink),0==--this.activeCount&&this.sink.end(Zo,$o.value)},or.prototype.run=function(Zo,$o){var Jo=this.sources.length,ep=Array(Jo+1),tp=Array(Jo),rp=new sr(this.f,tp,Zo);for(var op,pp=0;pp<Jo;++pp)op=tp[pp]=new pr(rp),ep[pp]=this.sources[pp].run(op,$o);return ep[pp]=this.sampler.run(rp,$o),L(ep)},pr.prototype.event=function(Zo,$o){this.value=$o,this.hasValue=!0,this.sink._notify(this)},pr.prototype.end=function(){},pr.prototype.error=Ke.prototype.error,sr.prototype._notify=function(){this.active||(this.active=this.sinks.every(nr))},sr.prototype.event=function(Zo){this.active&&this.sink.event(Zo,Et(this.f,E(ir,this.sinks)))},sr.prototype.end=Ke.prototype.end,sr.prototype.error=Ke.prototype.error,ur.prototype.push=function(Zo){var $o=this._length;this._checkCapacity($o+1);var Jo=this._head+$o&this._capacity-1;this[Jo]=Zo,this._length=$o+1},ur.prototype.shift=function(){var Zo=this._head,$o=this[Zo];return this[Zo]=void 0,this._head=Zo+1&this._capacity-1,this._length--,$o},ur.prototype.isEmpty=function(){return 0===this._length},ur.prototype.length=function(){return this._length},ur.prototype._checkCapacity=function(Zo){this._capacity<Zo&&this._ensureCapacity(this._capacity<<1)},ur.prototype._ensureCapacity=function(Zo){var $o=this._capacity;this._capacity=Zo;var Jo=this._head+this._length;Jo>$o&&ar(this,0,this,$o,Jo&$o-1)};var Do=E;yr.prototype.run=function(Zo,$o){var Jo=this.sources.length,ep=Array(Jo),tp=Array(Jo),rp=Array(Jo),op=new lr(this.f,rp,tp,Zo);for(var pp,sp=0;sp<Jo;++sp)rp[sp]=new ur,pp=tp[sp]=new wt(sp,op),ep[sp]=this.sources[sp].run(pp,$o);return L(ep)},lr.prototype.event=function(Zo,$o){// eslint-disable-line complexity
var Jo=this.buffers,ep=Jo[$o.index];if(ep.push($o.value),1===ep.length()){if(!fr(this.buffers))return;vr(this.f,Zo,Jo,this.sink),hr(this.buffers,this.sinks)&&this.sink.end(Zo,void 0)}},lr.prototype.end=function(Zo,$o){var Jo=this.buffers[$o.index];Jo.isEmpty()&&this.sink.end(Zo,$o.value)},lr.prototype.error=Ke.prototype.error,_r.prototype.run=function(Zo,$o){var Jo=new br(Zo,$o);return L([Jo,this.source.run(Jo,$o)])},br.prototype.event=function(Zo,$o){this._disposeCurrent(Zo),this.current=new gr(Zo,1/0,this,this.sink),this.current.disposable=$o.source.run(this.current,this.scheduler)},br.prototype.end=function(Zo,$o){this.ended=!0,this._checkEnd(Zo,$o)},br.prototype.error=function(Zo,$o){this.ended=!0,this.sink.error(Zo,$o)},br.prototype.dispose=function(){return this._disposeCurrent(this.scheduler.now())},br.prototype._disposeCurrent=function(Zo){if(null!==this.current)return this.current._dispose(Zo)},br.prototype._disposeInner=function(Zo,$o){$o._dispose(Zo),$o===this.current&&(this.current=null)},br.prototype._checkEnd=function(Zo,$o){this.ended&&null===this.current&&this.sink.end(Zo,$o)},br.prototype._endInner=function(Zo,$o,Jo){this._disposeInner(Zo,Jo),this._checkEnd(Zo,$o)},br.prototype._errorInner=function(Zo,$o,Jo){this._disposeInner(Zo,Jo),this.sink.error(Zo,$o)},gr.prototype.event=function(Zo,$o){Zo<this.max&&this.sink.event(Math.max(Zo,this.min),$o)},gr.prototype.end=function(Zo,$o){this.outer._endInner(Math.max(Zo,this.min),$o,this)},gr.prototype.error=function(Zo,$o){this.outer._errorInner(Math.max(Zo,this.min),$o,this)},gr.prototype._dispose=function(Zo){this.max=Zo,M(Zo,this.disposable,this.sink)},jr.prototype.run=function(Zo,$o){return this.source.run(new Rr(this.equals,Zo),$o)},Rr.prototype.end=Ke.prototype.end,Rr.prototype.error=Ke.prototype.error,Rr.prototype.event=function(Zo,$o){this.init?(this.init=!1,this.value=$o,this.sink.event(Zo,$o)):!this.equals(this.value,$o)&&(this.value=$o,this.sink.event(Zo,$o))},Br.prototype.run=function(Zo,$o){return new Wr(this.min,this.max-this.min,this.source,Zo,$o)},Wr.prototype.end=Ke.prototype.end,Wr.prototype.error=Ke.prototype.error,Wr.prototype.event=function(Zo,$o){// eslint-disable-line complexity
return 0<this.skip?void(this.skip-=1):void(0===this.take||(this.take-=1,this.sink.event(Zo,$o),0===this.take&&(this.dispose(),this.sink.end(Zo,$o))))},Wr.prototype.dispose=function(){return this.disposable.dispose()},Mr.prototype.run=function(Zo,$o){return new Dr(this.p,this.source,Zo,$o)},Dr.prototype.end=Ke.prototype.end,Dr.prototype.error=Ke.prototype.error,Dr.prototype.event=function(Zo,$o){if(this.active){var Jo=this.p;this.active=Jo($o),this.active?this.sink.event(Zo,$o):(this.dispose(),this.sink.end(Zo,$o))}},Dr.prototype.dispose=function(){return this.disposable.dispose()},zr.prototype.run=function(Zo,$o){return this.source.run(new Lr(this.p,Zo),$o)},Lr.prototype.end=Ke.prototype.end,Lr.prototype.error=Ke.prototype.error,Lr.prototype.event=function(Zo,$o){if(this.skipping){var Jo=this.p;if(this.skipping=Jo($o),this.skipping)return}this.sink.event(Zo,$o)},Kr.prototype.run=function(Zo,$o){var Jo=new Qr(-(1/0),Zo),ep=new Yr(this.maxSignal,Zo,$o),tp=this.source.run(new Gr(Jo,ep,Zo),$o);return L([Jo,ep,tp])},Fr.prototype.run=function(Zo,$o){var Jo=new Xr(this.minSignal,Zo,$o),ep=new Qr(1/0,Zo),tp=this.source.run(new Gr(Jo,ep,Zo),$o);return L([Jo,ep,tp])},Qr.prototype.error=Ke.prototype.error,Qr.prototype.event=Zr,Qr.prototype.end=Zr,Qr.prototype.dispose=Zr,Gr.prototype.event=function(Zo,$o){Zo>=this.min.value&&Zo<this.max.value&&this.sink.event(Zo,$o)},Gr.prototype.error=Ke.prototype.error,Gr.prototype.end=Ke.prototype.end,Xr.prototype.event=function(Zo/*, x */){Zo<this.value&&(this.value=Zo)},Xr.prototype.end=Zr,Xr.prototype.error=Ke.prototype.error,Xr.prototype.dispose=function(){return this.disposable.dispose()},Yr.prototype.event=function(Zo,$o){Zo<this.value&&(this.value=Zo,this.sink.end(Zo,$o))},Yr.prototype.end=Zr,Yr.prototype.error=Ke.prototype.error,Yr.prototype.dispose=function(){return this.disposable.dispose()},Jr.prototype.run=function(Zo,$o){var Jo=new eo(this.dt,Zo,$o);return L([Jo,this.source.run(Jo,$o)])},eo.prototype.dispose=function(){var Zo=this;this.scheduler.cancelAll(function($o){return $o.sink===Zo.sink})},eo.prototype.event=function(Zo,$o){this.scheduler.delay(this.dt,X.event($o,this.sink))},eo.prototype.end=function(Zo,$o){this.scheduler.delay(this.dt,X.end($o,this.sink))},eo.prototype.error=Ke.prototype.error,ro.prototype.run=function(Zo,$o){return this.source.run(new oo(Zo),$o)},oo.prototype.end=Ke.prototype.end,oo.prototype.error=Ke.prototype.error,oo.prototype.event=function(Zo,$o){this.sink.event(Zo,{time:Zo,value:$o})},uo.prototype.run=function(Zo,$o){return this.source.run(new ao(this.period,Zo),$o)},ao.prototype.event=function(Zo,$o){Zo>=this.time&&(this.time=Zo+this.period,this.sink.event(Zo,$o))},ao.prototype.end=Ke.prototype.end,ao.prototype.error=Ke.prototype.error,yo.prototype.run=function(Zo,$o){return new vo(this.dt,this.source,Zo,$o)},vo.prototype.event=function(Zo,$o){this._clearTimer(),this.value=$o,this.timer=this.scheduler.delay(this.dt,X.event($o,this.sink))},vo.prototype.end=function(Zo,$o){this._clearTimer()&&(this.sink.event(Zo,this.value),this.value=void 0),this.sink.end(Zo,$o)},vo.prototype.error=function(Zo,$o){this._clearTimer(),this.sink.error(Zo,$o)},vo.prototype.dispose=function(){this._clearTimer()},vo.prototype._clearTimer=function(){return null!==this.timer&&(this.timer.dispose(),this.timer=null,!0)},ho.prototype.run=function(Zo,$o){return this.source.run(new fo(Zo,$o),$o)},fo.prototype.event=function(Zo,$o){var Jo=this;this.queue=this.queue.then(function(){return Jo._event($o)}).catch(this._errorBound)},fo.prototype.end=function(Zo,$o){var Jo=this;this.queue=this.queue.then(function(){return Jo._end($o)}).catch(this._errorBound)},fo.prototype.error=function(Zo,$o){var Jo=this;// Don't resolve error values, propagate directly
this.queue=this.queue.then(function(){return Jo._errorBound($o)}).catch(G)},fo.prototype._event=function(Zo){return Zo.then(this._eventBound)},fo.prototype._end=function(Zo){return Promise.resolve(Zo).then(this._endBound)},mo.prototype.event=function(Zo,$o){this.active&&this.sink.event(Zo,$o)},mo.prototype.end=function(Zo,$o){this.active&&(this.disable(),this.sink.end(Zo,$o))},mo.prototype.error=function(Zo,$o){this.disable(),this.sink.error(Zo,$o)},mo.prototype.disable=function(){return this.active=!1,this.sink};var Po=/** @license MIT License (c) copyright 2010-2016 original author or authors *//** @author Brian Cavalier *//** @author John Hann *//**
 * If stream encounters an error, recover and continue with items from stream
 * returned by f.
 * @param {function(error:*):Stream} f function which returns a new stream
 * @param {Stream} stream
 * @returns {Stream} new stream which will recover from an error by calling f
 */function($o,Jo){return new v(new _o($o,Jo.source))};_o.prototype.run=function(Zo,$o){return new bo(this.f,this.source,Zo,$o)},bo.prototype.event=function(Zo,$o){De(Zo,$o,this.sink)},bo.prototype.end=function(Zo,$o){Pe(Zo,$o,this.sink)},bo.prototype.error=function(Zo,$o){var Jo=this.sink.disable();M(Zo,this.disposable,this.sink),this._startNext(Zo,$o,Jo)},bo.prototype._startNext=function(Zo,$o,Jo){try{this.disposable=this._continue(this.f,$o,Jo)}catch(ep){Jo.error(Zo,ep)}},bo.prototype._continue=function(Zo,$o,Jo){var ep=Zo($o);return ep.source.run(Jo,this.scheduler)},bo.prototype.dispose=function(){return this.disposable.dispose()};var zo=function($o,Jo){this.source=$o,this.sink=Jo,this.disposed=!1};zo.prototype.dispose=function(){if(!this.disposed){this.disposed=!0;var $o=this.source.remove(this.sink);return 0===$o&&this.source._dispose()}};var Lo=function(Zo){return Zo.dispose()},Uo={dispose:function(){}},Oo=function($o){this.source=$o,this.sinks=[],this._disposable=Uo};Oo.prototype.run=function($o,Jo){var ep=this.add($o);return 1===ep&&(this._disposable=this.source.run(this,Jo)),new zo(this,$o)},Oo.prototype._dispose=function(){var $o=this._disposable;return this._disposable=Uo,Promise.resolve($o).then(Lo)},Oo.prototype.add=function($o){return this.sinks=h($o,this.sinks),this.sinks.length},Oo.prototype.remove=function($o){var Jo=T($o,this.sinks);// istanbul ignore next
return 0<=Jo&&(this.sinks=A(Jo,this.sinks)),this.sinks.length},Oo.prototype.event=function($o,Jo){var ep=this.sinks;if(1===ep.length)return ep[0].event($o,Jo);for(var tp=0;tp<ep.length;++tp)go($o,Jo,ep[tp])},Oo.prototype.end=function($o,Jo){var ep=this.sinks;for(var tp=0;tp<ep.length;++tp)xo($o,Jo,ep[tp])},Oo.prototype.error=function($o,Jo){var ep=this.sinks;for(var tp=0;tp<ep.length;++tp)ep[tp].error($o,Jo)},v.of=J,v.empty=re,v.from=function($o){// eslint-disable-line complexity
if($o instanceof v)return $o;var Jo=ke($o);if(null!=Jo)return he(Jo);if(Array.isArray($o)||C($o))return ie($o);if(de($o))return ye($o);throw new TypeError('from(x) must be observable, iterable, or array-like: '+$o)},v.prototype.subscribe=function(Zo){return qe(Zo,this)},v.prototype[Wo]=function(){return this},v.prototype.thru=function(Zo){return Me(Zo,this)},v.prototype.observe=v.prototype.forEach=function(Zo){return pt(Zo,this)},v.prototype.drain=function(){return nt(this)},v.prototype.loop=function(Zo,$o){return it(Zo,$o,this)},v.prototype.scan=function(Zo,$o){return yt(Zo,$o,this)},v.prototype.reduce=function(Zo,$o){return kt(Zo,$o,this)},v.prototype.concat=function(Zo){return xt(this,Zo)},v.prototype.startWith=function(Zo){return gt(Zo,this)},v.prototype.map=function(Zo){return Je(Zo,this)},v.prototype.ap=function(Zo){return Ct(this,Zo)},v.prototype.constant=function(Zo){return et(Zo,this)},v.prototype.tap=function(Zo){return tt(Zo,this)},v.prototype.transduce=function(Zo){return Nt(Zo,this)},v.prototype.chain=function(Zo){return Ft(Zo,this)},v.prototype.flatMap=v.prototype.chain,v.prototype.join=function(){return Qt(this)},v.prototype.continueWith=function(Zo){return mt(Zo,this)},v.prototype.flatMapEnd=v.prototype.continueWith,v.prototype.concatMap=function(Zo){return Gt(Zo,this)},v.prototype.mergeConcurrently=function(Zo){return zt(Zo,this)},v.prototype.merge=function()/* ...streams*/{return Xt(k(this,arguments))},v.prototype.combine=function(Zo/*, ...streams*/){return Rt(Zo,R(this,0,arguments))},v.prototype.sampleWith=function(Zo){return er(Zo,this)},v.prototype.sample=function(Zo/* ...streams */){return tr(Zo,this,w(arguments))},v.prototype.zip=function(Zo/*, ...streams*/){return dr(Zo,R(this,0,arguments))},v.prototype.switchLatest=function(){return mr(this)},v.prototype.switch=v.prototype.switchLatest,v.prototype.filter=function(Zo){return xr(Zo,this)},v.prototype.skipRepeats=function(){return wr(this)},v.prototype.skipRepeatsWith=function(Zo){return Er(Zo,this)},v.prototype.take=function(Zo){return Sr(Zo,this)},v.prototype.skip=function(Zo){return Ir(Zo,this)},v.prototype.slice=function(Zo,$o){return Tr(Zo,$o,this)},v.prototype.takeWhile=function(Zo){return Vr(Zo,this)},v.prototype.skipWhile=function(Zo){return Pr(Zo,this)},v.prototype.until=function(Zo){return Ur(Zo,this)},v.prototype.takeUntil=v.prototype.until,v.prototype.since=function(Zo){return Or(Zo,this)},v.prototype.skipUntil=v.prototype.since,v.prototype.during=function(Zo){return Hr(Zo,this)},v.prototype.delay=function(Zo){return $r(Zo,this)},v.prototype.timestamp=function(){return to(this)},v.prototype.throttle=function(Zo){return po(Zo,this)},v.prototype.debounce=function(Zo){return co(Zo,this)},v.prototype.awaitPromises=function(){return ko(this)},v.prototype.await=v.prototype.awaitPromises,v.prototype.recoverWith=function(Zo){return Po(Zo,this)},v.prototype.flatMapError=v.prototype.recoverWith,v.prototype.multicast=function(){return wo(this)};// export the instance of the defaultScheduler for third-party libraries
// export an implementation of Task used internally for third-party libraries
var Ho=function(Zo){function $o(Jo,ep){var tp=Zo.call(this,Jo)||this;return tp.has=!1,tp.buffer=[],tp.bufferSize=ep,tp}return c($o,Zo),$o.prototype.add=function(Jo){return this.has&&Eo(this.buffer,Jo),Zo.prototype.add.call(this,Jo)},$o.prototype.event=function(Jo,ep){return this.has=!0,this.buffer=jo(ep,this.buffer,this.bufferSize),Zo.prototype.event.call(this,Jo,ep)},$o}(Oo),Ko=function(Zo){function $o(Jo){return Zo.call(this,Jo)||this}return c($o,Zo),$o.prototype.next=function(Jo){return Vo.asap(X.event(Jo,this.source)),this},$o.prototype.error=function(Jo){return Vo.asap(X.error(Jo,this.source)),this},$o.prototype.complete=function(Jo){return Vo.asap(X.end(Jo,this.source)),this},$o}(v),Fo=function(Zo){function $o(Jo){return Zo.call(this,Jo)||this}return c($o,Zo),$o.prototype.next=function(Jo){return this.source.event(Vo.now(),Jo),this},$o.prototype.error=function(Jo){return this.source.error(Vo.now(),Jo),this},$o.prototype.complete=function(Jo){return this.source.end(Vo.now(),Jo),this},$o}(v),Qo=N(function($o,Jo){return Jo.next($o)}),Go=N(function($o,Jo){return Jo.error($o)}),Xo=N(function($o,Jo){return Jo.complete($o)}),Yo=N(function($o,Jo){return new Jo.constructor(new Ho(Jo.source,$o))});u.dropAndAppend=jo,u.HoldSubjectSource=Ho,u.async=function(){return Ro(se())},u.asAsync=Ro,u.AsyncSubject=Ko,u.sync=function(){return Ao(se())},u.asSync=Ao,u.SyncSubject=Fo,u.next=Qo,u.error=Go,u.complete=Xo,u.hold=Yo,Object.defineProperty(u,'__esModule',{value:!0})});
